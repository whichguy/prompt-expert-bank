{
  "name": "Google Apps Script Test Suite",
  "description": "Test scenarios for evaluating GAS code quality and functionality",
  "scenarios": [
    {
      "id": "batch_processing",
      "description": "Test ability to use batch operations instead of row-by-row",
      "messages": [
        {
          "role": "user",
          "content": "I need to convert 10,000 rows in column A to uppercase and put results in column B"
        }
      ],
      "evaluation_points": [
        "Uses getValues() for batch read",
        "Processes data in memory with map/forEach",
        "Uses setValues() for batch write",
        "Avoids row-by-row getValue/setValue",
        "Handles the 6-minute execution limit"
      ]
    },
    {
      "id": "api_error_handling",
      "description": "Test proper error handling for external API calls",
      "messages": [
        {
          "role": "user",
          "content": "Create a function to fetch data from an API and handle potential failures"
        }
      ],
      "evaluation_points": [
        "Uses try/catch blocks",
        "Sets muteHttpExceptions: true",
        "Checks response codes",
        "Provides user-friendly error messages",
        "Logs errors for debugging"
      ]
    },
    {
      "id": "oauth_scopes",
      "description": "Test understanding of OAuth scopes and permissions",
      "messages": [
        {
          "role": "user",
          "content": "Create a script that reads from Sheets and sends emails with attachments from Drive"
        }
      ],
      "evaluation_points": [
        "Identifies required OAuth scopes",
        "Mentions manifest file configuration",
        "Uses proper Google service calls",
        "Handles permission errors gracefully"
      ]
    },
    {
      "id": "performance_optimization",
      "description": "Test ability to optimize for GAS performance constraints",
      "messages": [
        {
          "role": "user",
          "content": "Process a sheet with 50,000 rows, calculate running totals, and highlight cells based on conditions"
        }
      ],
      "evaluation_points": [
        "Discusses 6-minute execution limit",
        "Suggests batch processing in chunks",
        "Uses efficient data structures",
        "Minimizes API calls",
        "Considers using PropertiesService for state"
      ]
    },
    {
      "id": "trigger_setup",
      "description": "Test knowledge of GAS triggers and automation",
      "messages": [
        {
          "role": "user",
          "content": "Set up a script to automatically process new form responses and send email notifications"
        }
      ],
      "evaluation_points": [
        "Uses appropriate trigger type (onFormSubmit)",
        "Handles trigger event object correctly",
        "Includes error handling for triggers",
        "Mentions trigger limitations",
        "Provides installation instructions"
      ]
    }
  ]
}
